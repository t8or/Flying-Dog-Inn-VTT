{"ast":null,"code":"var _jsxFileName = \"/Users/josh.thorn/AutoML Co-Pilot/flying-dog-inn-vtt-frontend/src/components/Timeline.js\",\n  _s = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { DotsThree } from '@phosphor-icons/react';\nimport { useCampaign } from '../contexts/CampaignContext';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst formatDate = timestamp => {\n  try {\n    const date = new Date(parseInt(timestamp));\n    return date.toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric'\n    });\n  } catch (error) {\n    console.error('Error formatting date:', error);\n    return 'Invalid Date';\n  }\n};\nconst EventMenu = ({\n  event,\n  onEdit,\n  onDelete\n}) => {\n  _s();\n  const [showMenu, setShowMenu] = useState(false);\n  const menuRef = useRef(null);\n  useEffect(() => {\n    const handleClickOutside = e => {\n      if (menuRef.current && !menuRef.current.contains(e.target)) {\n        setShowMenu(false);\n      }\n    };\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      position: 'relative'\n    },\n    ref: menuRef,\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setShowMenu(!showMenu),\n      style: {\n        background: 'transparent',\n        border: 'none',\n        padding: '4px',\n        cursor: 'pointer',\n        color: '#6B7280',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        borderRadius: '4px'\n      },\n      children: /*#__PURE__*/_jsxDEV(DotsThree, {\n        size: 20,\n        weight: \"bold\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }, this), showMenu && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'absolute',\n        right: 0,\n        top: '100%',\n        background: 'white',\n        borderRadius: '8px',\n        boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)',\n        minWidth: '120px',\n        zIndex: 10\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          onEdit(event);\n          setShowMenu(false);\n        },\n        style: {\n          width: '100%',\n          textAlign: 'left',\n          padding: '8px 12px',\n          background: 'none',\n          border: 'none',\n          color: '#374151',\n          fontSize: '14px',\n          cursor: 'pointer',\n          display: 'block'\n        },\n        children: \"Edit event\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          onDelete(event.id);\n          setShowMenu(false);\n        },\n        style: {\n          width: '100%',\n          textAlign: 'left',\n          padding: '8px 12px',\n          background: 'none',\n          border: 'none',\n          color: '#DC2626',\n          fontSize: '14px',\n          cursor: 'pointer',\n          display: 'block'\n        },\n        children: \"Delete event\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 5\n  }, this);\n};\n_s(EventMenu, \"IrpJJ9vEf04eEvLSh3rG0JvlrDI=\");\n_c = EventMenu;\nconst TimelineNavigation = ({\n  events,\n  onTimelineClick\n}) => {\n  const groupedEvents = events.reduce((acc, event) => {\n    const date = new Date(parseInt(event.timestamp));\n    const month = date.toLocaleString('default', {\n      month: 'long',\n      year: 'numeric'\n    });\n    if (!acc[month]) {\n      acc[month] = [];\n    }\n    acc[month].push(event);\n    return acc;\n  }, {});\n\n  // Sort months for calculating fade\n  const sortedMonths = Object.keys(groupedEvents).sort((a, b) => {\n    const dateA = new Date(a);\n    const dateB = new Date(b);\n    return dateB - dateA;\n  });\n\n  // Calculate opacity based on position\n  const getColor = month => {\n    const index = sortedMonths.indexOf(month);\n    const totalMonths = sortedMonths.length - 1;\n    if (totalMonths === 0) return 'rgb(107, 95, 95)'; // Warm cream-tinted color\n\n    const opacity = 1 - index / totalMonths * 0.7; // Fade from 1 to 0.3\n    return `rgba(107, 95, 95, ${opacity})`;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      width: '296px',\n      borderLeft: '1px solid #E5E7EB'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      style: {\n        fontSize: '14px',\n        color: '#6B7280',\n        textTransform: 'uppercase',\n        letterSpacing: '0.05em',\n        marginTop: 0,\n        marginBottom: '16px'\n      },\n      children: \"Timeline Navigation\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 7\n    }, this), Object.entries(groupedEvents).sort(([monthA], [monthB]) => {\n      const dateA = new Date(monthA);\n      const dateB = new Date(monthB);\n      return dateB - dateA;\n    }).map(([month, monthEvents]) => /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: '24px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        style: {\n          fontSize: '14px',\n          color: getColor(month),\n          margin: '0 0 8px 0'\n        },\n        children: month\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          flexDirection: 'column',\n          gap: '4px'\n        },\n        children: monthEvents.sort((a, b) => b.timestamp - a.timestamp).map(event => /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => onTimelineClick(event),\n          style: {\n            background: 'transparent',\n            border: 'none',\n            padding: '4px 8px',\n            borderRadius: '4px',\n            cursor: 'pointer',\n            textAlign: 'left',\n            fontSize: '14px',\n            color: '#4B5563',\n            ':hover': {\n              background: '#F3F4F6'\n            }\n          },\n          children: event.event\n        }, event.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 19\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 13\n      }, this)]\n    }, month, true, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 11\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 137,\n    columnNumber: 5\n  }, this);\n};\n_c2 = TimelineNavigation;\nconst Timeline = () => {\n  _s3();\n  var _s2 = $RefreshSig$();\n  const [events, setEvents] = useState([]);\n  const [isAddingEvent, setIsAddingEvent] = useState(false);\n  const [editingEvent, setEditingEvent] = useState(null);\n  const {\n    selectedCampaign\n  } = useCampaign();\n  useEffect(() => {\n    setEvents([]); // Clear events when campaign changes\n    if (selectedCampaign) {\n      fetchEvents();\n    }\n  }, [selectedCampaign === null || selectedCampaign === void 0 ? void 0 : selectedCampaign.id]); // Add .id to ensure it updates when campaign changes\n\n  const fetchEvents = async () => {\n    if (!selectedCampaign) return;\n    try {\n      const response = await fetch(`http://localhost:3001/api/timeline?campaign_id=${selectedCampaign.id}`);\n      if (!response.ok) throw new Error('Failed to fetch events');\n      const data = await response.json();\n      setEvents(data);\n    } catch (error) {\n      console.error('Error fetching events:', error);\n    }\n  };\n  const handleEdit = event => {\n    setEditingEvent(event);\n    setIsAddingEvent(true);\n  };\n  const handleDelete = async eventId => {\n    if (!selectedCampaign) {\n      console.error('No campaign selected');\n      return;\n    }\n    try {\n      console.log('Deleting event:', eventId);\n      const response = await fetch(`http://localhost:3001/api/timeline/${eventId}?campaign_id=${selectedCampaign.id}`, {\n        method: 'DELETE'\n      });\n      if (!response.ok) {\n        const errorText = await response.text();\n        throw new Error(errorText || 'Failed to delete event');\n      }\n      console.log('Event deleted:', eventId);\n      await fetchEvents();\n    } catch (error) {\n      console.error('Error deleting event:', error);\n    }\n  };\n  const EventForm = ({\n    isEditing = false,\n    onCancel,\n    initialEvent = null\n  }) => {\n    _s2();\n    const [formData, setFormData] = useState({\n      event: (initialEvent === null || initialEvent === void 0 ? void 0 : initialEvent.event) || '',\n      details: (initialEvent === null || initialEvent === void 0 ? void 0 : initialEvent.details) || '',\n      date: initialEvent ? new Date(initialEvent.timestamp).toISOString().split('T')[0] : new Date().toISOString().split('T')[0]\n    });\n    const handleInputChange = e => {\n      const {\n        name,\n        value\n      } = e.target;\n      setFormData(prev => ({\n        ...prev,\n        [name]: value\n      }));\n    };\n    const handleSubmit = async () => {\n      if (!selectedCampaign) {\n        console.error('No campaign selected');\n        return;\n      }\n      try {\n        const timestamp = new Date(formData.date).getTime();\n        const eventData = {\n          event: formData.event,\n          details: formData.details,\n          timestamp,\n          campaign_id: selectedCampaign.id\n        };\n        const url = initialEvent ? `http://localhost:3001/api/timeline/${initialEvent.id}` : 'http://localhost:3001/api/timeline';\n        const method = initialEvent ? 'PUT' : 'POST';\n        console.log('Submitting event:', eventData);\n        const response = await fetch(url, {\n          method,\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(eventData)\n        });\n        if (!response.ok) {\n          const errorText = await response.text();\n          throw new Error(errorText || 'Failed to save event');\n        }\n        const data = await response.json();\n        console.log('Event saved:', data);\n        await fetchEvents();\n        onCancel();\n      } catch (error) {\n        console.error('Error saving event:', error);\n      }\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: 'white',\n        borderRadius: '8px',\n        padding: '16px',\n        boxShadow: '0 1px 3px rgba(0, 0, 0, 0.1)',\n        marginBottom: isEditing ? '16px' : '20px'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'relative'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"event\",\n          placeholder: \"Event\",\n          value: formData.event,\n          onChange: handleInputChange,\n          className: \"event-input\",\n          style: {\n            width: '100%',\n            padding: '8px',\n            marginBottom: '8px',\n            background: 'transparent',\n            border: 'none',\n            borderBottom: '1px solid #E5E7EB',\n            color: formData.event ? '#111827' : '#6B7280',\n            fontSize: '16px',\n            fontWeight: '600',\n            outline: 'none'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          name: \"details\",\n          placeholder: \"Details\",\n          value: formData.details,\n          onChange: handleInputChange,\n          className: \"details-input\",\n          style: {\n            width: '100%',\n            padding: '8px',\n            marginBottom: '16px',\n            background: 'transparent',\n            border: 'none',\n            borderBottom: '1px solid #E5E7EB',\n            color: formData.details ? '#111827' : '#6B7280',\n            fontSize: '14px',\n            resize: 'vertical',\n            minHeight: '80px',\n            outline: 'none',\n            whiteSpace: 'pre-wrap'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'space-between'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              alignItems: 'center',\n              gap: '8px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                color: '#6B7280',\n                fontSize: '14px'\n              },\n              children: \"Game session date:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 374,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"date\",\n              name: \"date\",\n              value: formData.date,\n              onChange: handleInputChange,\n              style: {\n                background: 'white',\n                border: '1px solid #E5E7EB',\n                borderRadius: '4px',\n                padding: '4px 8px',\n                color: '#111827'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 377,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 373,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              gap: '8px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: onCancel,\n              style: {\n                background: 'white',\n                color: '#6B7280',\n                border: '1px solid #E5E7EB',\n                borderRadius: '4px',\n                padding: '8px 16px',\n                cursor: 'pointer',\n                fontWeight: '500'\n              },\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 392,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleSubmit,\n              className: \"dnd-button-secondary\",\n              children: isEditing ? 'Update event' : 'Save event'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 406,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 391,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 7\n    }, this);\n  };\n  _s2(EventForm, \"Ml77MrK06J83QwK7LEIFghnJ0Js=\");\n  const handleTimelineClick = event => {\n    // Scroll to the event in the main timeline\n    const element = document.getElementById(`event-${event.id}`);\n    if (element) {\n      element.scrollIntoView({\n        behavior: 'smooth',\n        block: 'center'\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"style\", {\n      children: `\n          .event-input::placeholder {\n            color: #6B7280 !important;\n            font-weight: 600 !important;\n          }\n          .details-input::placeholder {\n            color: #6B7280 !important;\n          }\n          .timeline-nav-button:hover {\n            background: #F3F4F6;\n          }\n          .dnd-button {\n            background: linear-gradient(135deg, #8B4513 0%, #654321 100%);\n            color: #F5E6D3;\n            border: 1px solid #A0522D;\n            border-radius: 6px;\n            padding: 8px 20px;\n            cursor: pointer;\n            font-weight: 600;\n            font-size: 14px;\n            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.1);\n            text-transform: capitalize;\n            letter-spacing: 0.02em;\n            transition: all 0.2s ease;\n          }\n          .dnd-button:hover {\n            background: linear-gradient(135deg, #9B5523 0%, #755331 100%);\n            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.1);\n          }\n          .dnd-button-secondary {\n            background: #F5E6D3;\n            color: #8B4513;\n            border: 1px solid #A0522D;\n            border-radius: 6px;\n            padding: 8px 20px;\n            cursor: pointer;\n            font-weight: 600;\n            font-size: 14px;\n            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.5);\n            text-transform: capitalize;\n            letter-spacing: 0.02em;\n            transition: all 0.2s ease;\n          }\n          .dnd-button-secondary:hover {\n            background: #F8EFE3;\n            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.5);\n          }\n        `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 429,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: '32px 32px 0 32px',\n        height: '100%',\n        display: 'flex',\n        flexDirection: 'column'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: '48px',\n          alignItems: 'flex-start',\n          height: '100%'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            flex: '1 1 auto',\n            minWidth: '400px',\n            maxWidth: '800px',\n            display: 'flex',\n            flexDirection: 'column',\n            gap: '24px',\n            height: '100%'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              justifyContent: 'space-between',\n              alignItems: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              style: {\n                margin: 0,\n                fontSize: '24px',\n                color: '#111827'\n              },\n              children: \"Timeline\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 505,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                setIsAddingEvent(true);\n                setEditingEvent(null);\n              },\n              className: \"dnd-button\",\n              children: \"Add new event\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 506,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 500,\n            columnNumber: 13\n          }, this), isAddingEvent && !editingEvent && /*#__PURE__*/_jsxDEV(EventForm, {\n            onCancel: () => setIsAddingEvent(false)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 518,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              flexDirection: 'column',\n              gap: '16px',\n              flex: 1,\n              overflowY: 'auto'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                paddingTop: '8px',\n                paddingBottom: '8px'\n              },\n              children: Object.entries(events.reduce((acc, event) => {\n                const date = new Date(parseInt(event.timestamp));\n                const month = date.toLocaleString('default', {\n                  month: 'long',\n                  year: 'numeric'\n                });\n                if (!acc[month]) {\n                  acc[month] = [];\n                }\n                acc[month].push(event);\n                return acc;\n              }, {})).sort(([monthA], [monthB]) => {\n                const dateA = new Date(monthA);\n                const dateB = new Date(monthB);\n                return dateB - dateA;\n              }).map(([month, monthEvents]) => /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  style: {\n                    fontSize: '13px',\n                    color: 'rgb(107, 95, 95)',\n                    margin: '24px 0 16px 0',\n                    fontWeight: '500',\n                    letterSpacing: '0.025em'\n                  },\n                  children: month\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 547,\n                  columnNumber: 21\n                }, this), monthEvents.sort((a, b) => b.timestamp - a.timestamp).map(event => {\n                  if (editingEvent && editingEvent.id === event.id) {\n                    return /*#__PURE__*/_jsxDEV(EventForm, {\n                      isEditing: true,\n                      initialEvent: event,\n                      onCancel: () => {\n                        setEditingEvent(null);\n                        setIsAddingEvent(false);\n                      }\n                    }, event.id, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 560,\n                      columnNumber: 34\n                    }, this);\n                  }\n                  return /*#__PURE__*/_jsxDEV(\"div\", {\n                    id: `event-${event.id}`,\n                    style: {\n                      background: 'white',\n                      padding: '16px',\n                      marginBottom: '16px',\n                      borderRadius: '8px',\n                      boxShadow: '0 1px 3px rgba(0, 0, 0, 0.1)'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        display: 'flex',\n                        justifyContent: 'space-between',\n                        alignItems: 'flex-start',\n                        marginBottom: '8px'\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                        style: {\n                          margin: '0 0 16px 0',\n                          color: '#111827',\n                          fontWeight: '500'\n                        },\n                        children: event.event\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 589,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(EventMenu, {\n                        event: event,\n                        onEdit: handleEdit,\n                        onDelete: handleDelete\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 590,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 583,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      style: {\n                        margin: '0 0 16px 0',\n                        color: '#6B7280',\n                        whiteSpace: 'pre-wrap'\n                      },\n                      children: event.details\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 592,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                      style: {\n                        color: '#6B7280',\n                        display: 'block',\n                        margin: 0\n                      },\n                      children: formatDate(event.timestamp)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 597,\n                      columnNumber: 29\n                    }, this)]\n                  }, event.id, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 572,\n                    columnNumber: 27\n                  }, this);\n                })]\n              }, month, true, {\n                fileName: _jsxFileName,\n                lineNumber: 546,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 528,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 521,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 491,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TimelineNavigation, {\n          events: events,\n          onTimelineClick: handleTimelineClick\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 607,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 485,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 479,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s3(Timeline, \"jsdKSS8+O/JyBnskfz+gC+DGujM=\", false, function () {\n  return [useCampaign];\n});\n_c3 = Timeline;\nexport default Timeline;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"EventMenu\");\n$RefreshReg$(_c2, \"TimelineNavigation\");\n$RefreshReg$(_c3, \"Timeline\");","map":{"version":3,"names":["React","useState","useEffect","useRef","DotsThree","useCampaign","jsxDEV","_jsxDEV","Fragment","_Fragment","formatDate","timestamp","date","Date","parseInt","toLocaleDateString","year","month","day","error","console","EventMenu","event","onEdit","onDelete","_s","showMenu","setShowMenu","menuRef","handleClickOutside","e","current","contains","target","document","addEventListener","removeEventListener","style","position","ref","children","onClick","background","border","padding","cursor","color","display","alignItems","justifyContent","borderRadius","size","weight","fileName","_jsxFileName","lineNumber","columnNumber","right","top","boxShadow","minWidth","zIndex","width","textAlign","fontSize","id","_c","TimelineNavigation","events","onTimelineClick","groupedEvents","reduce","acc","toLocaleString","push","sortedMonths","Object","keys","sort","a","b","dateA","dateB","getColor","index","indexOf","totalMonths","length","opacity","borderLeft","textTransform","letterSpacing","marginTop","marginBottom","entries","monthA","monthB","map","monthEvents","margin","flexDirection","gap","_c2","Timeline","_s3","_s2","$RefreshSig$","setEvents","isAddingEvent","setIsAddingEvent","editingEvent","setEditingEvent","selectedCampaign","fetchEvents","response","fetch","ok","Error","data","json","handleEdit","handleDelete","eventId","log","method","errorText","text","EventForm","isEditing","onCancel","initialEvent","formData","setFormData","details","toISOString","split","handleInputChange","name","value","prev","handleSubmit","getTime","eventData","campaign_id","url","headers","body","JSON","stringify","type","placeholder","onChange","className","borderBottom","fontWeight","outline","resize","minHeight","whiteSpace","handleTimelineClick","element","getElementById","scrollIntoView","behavior","block","height","flex","maxWidth","overflowY","paddingTop","paddingBottom","_c3","$RefreshReg$"],"sources":["/Users/josh.thorn/AutoML Co-Pilot/flying-dog-inn-vtt-frontend/src/components/Timeline.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { DotsThree } from '@phosphor-icons/react';\nimport { useCampaign } from '../contexts/CampaignContext';\n\nconst formatDate = (timestamp) => {\n  try {\n    const date = new Date(parseInt(timestamp));\n    return date.toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric'\n    });\n  } catch (error) {\n    console.error('Error formatting date:', error);\n    return 'Invalid Date';\n  }\n};\n\nconst EventMenu = ({ event, onEdit, onDelete }) => {\n  const [showMenu, setShowMenu] = useState(false);\n  const menuRef = useRef(null);\n\n  useEffect(() => {\n    const handleClickOutside = (e) => {\n      if (menuRef.current && !menuRef.current.contains(e.target)) {\n        setShowMenu(false);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n\n  return (\n    <div style={{ position: 'relative' }} ref={menuRef}>\n      <button\n        onClick={() => setShowMenu(!showMenu)}\n        style={{\n          background: 'transparent',\n          border: 'none',\n          padding: '4px',\n          cursor: 'pointer',\n          color: '#6B7280',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          borderRadius: '4px'\n        }}\n      >\n        <DotsThree size={20} weight=\"bold\" />\n      </button>\n      {showMenu && (\n        <div style={{\n          position: 'absolute',\n          right: 0,\n          top: '100%',\n          background: 'white',\n          borderRadius: '8px',\n          boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)',\n          minWidth: '120px',\n          zIndex: 10\n        }}>\n          <button\n            onClick={() => {\n              onEdit(event);\n              setShowMenu(false);\n            }}\n            style={{\n              width: '100%',\n              textAlign: 'left',\n              padding: '8px 12px',\n              background: 'none',\n              border: 'none',\n              color: '#374151',\n              fontSize: '14px',\n              cursor: 'pointer',\n              display: 'block'\n            }}\n          >\n            Edit event\n          </button>\n          <button\n            onClick={() => {\n              onDelete(event.id);\n              setShowMenu(false);\n            }}\n            style={{\n              width: '100%',\n              textAlign: 'left',\n              padding: '8px 12px',\n              background: 'none',\n              border: 'none',\n              color: '#DC2626',\n              fontSize: '14px',\n              cursor: 'pointer',\n              display: 'block'\n            }}\n          >\n            Delete event\n          </button>\n        </div>\n      )}\n    </div>\n  );\n};\n\nconst TimelineNavigation = ({ events, onTimelineClick }) => {\n  const groupedEvents = events.reduce((acc, event) => {\n    const date = new Date(parseInt(event.timestamp));\n    const month = date.toLocaleString('default', { month: 'long', year: 'numeric' });\n    \n    if (!acc[month]) {\n      acc[month] = [];\n    }\n    acc[month].push(event);\n    return acc;\n  }, {});\n\n  // Sort months for calculating fade\n  const sortedMonths = Object.keys(groupedEvents).sort((a, b) => {\n    const dateA = new Date(a);\n    const dateB = new Date(b);\n    return dateB - dateA;\n  });\n\n  // Calculate opacity based on position\n  const getColor = (month) => {\n    const index = sortedMonths.indexOf(month);\n    const totalMonths = sortedMonths.length - 1;\n    if (totalMonths === 0) return 'rgb(107, 95, 95)'; // Warm cream-tinted color\n    \n    const opacity = 1 - (index / totalMonths * 0.7); // Fade from 1 to 0.3\n    return `rgba(107, 95, 95, ${opacity})`;\n  };\n\n  return (\n    <div style={{\n      width: '296px',\n      borderLeft: '1px solid #E5E7EB'\n    }}>\n      <h3 style={{ \n        fontSize: '14px', \n        color: '#6B7280', \n        textTransform: 'uppercase',\n        letterSpacing: '0.05em',\n        marginTop: 0,\n        marginBottom: '16px'\n      }}>\n        Timeline Navigation\n      </h3>\n      \n      {Object.entries(groupedEvents)\n        .sort(([monthA], [monthB]) => {\n          const dateA = new Date(monthA);\n          const dateB = new Date(monthB);\n          return dateB - dateA;\n        })\n        .map(([month, monthEvents]) => (\n          <div key={month} style={{ marginBottom: '24px' }}>\n            <h4 style={{ \n              fontSize: '14px', \n              color: getColor(month),\n              margin: '0 0 8px 0'\n            }}>\n              {month}\n            </h4>\n            <div style={{ display: 'flex', flexDirection: 'column', gap: '4px' }}>\n              {monthEvents\n                .sort((a, b) => b.timestamp - a.timestamp)\n                .map(event => (\n                  <button\n                    key={event.id}\n                    onClick={() => onTimelineClick(event)}\n                    style={{\n                      background: 'transparent',\n                      border: 'none',\n                      padding: '4px 8px',\n                      borderRadius: '4px',\n                      cursor: 'pointer',\n                      textAlign: 'left',\n                      fontSize: '14px',\n                      color: '#4B5563',\n                      ':hover': {\n                        background: '#F3F4F6'\n                      }\n                    }}\n                  >\n                    {event.event}\n                  </button>\n                ))}\n            </div>\n          </div>\n        ))}\n    </div>\n  );\n};\n\nconst Timeline = () => {\n  const [events, setEvents] = useState([]);\n  const [isAddingEvent, setIsAddingEvent] = useState(false);\n  const [editingEvent, setEditingEvent] = useState(null);\n  const { selectedCampaign } = useCampaign();\n\n  useEffect(() => {\n    setEvents([]); // Clear events when campaign changes\n    if (selectedCampaign) {\n      fetchEvents();\n    }\n  }, [selectedCampaign?.id]); // Add .id to ensure it updates when campaign changes\n\n  const fetchEvents = async () => {\n    if (!selectedCampaign) return;\n    \n    try {\n      const response = await fetch(`http://localhost:3001/api/timeline?campaign_id=${selectedCampaign.id}`);\n      if (!response.ok) throw new Error('Failed to fetch events');\n      const data = await response.json();\n      setEvents(data);\n    } catch (error) {\n      console.error('Error fetching events:', error);\n    }\n  };\n\n  const handleEdit = (event) => {\n    setEditingEvent(event);\n    setIsAddingEvent(true);\n  };\n\n  const handleDelete = async (eventId) => {\n    if (!selectedCampaign) {\n      console.error('No campaign selected');\n      return;\n    }\n    \n    try {\n      console.log('Deleting event:', eventId);\n      const response = await fetch(\n        `http://localhost:3001/api/timeline/${eventId}?campaign_id=${selectedCampaign.id}`, \n        { method: 'DELETE' }\n      );\n      \n      if (!response.ok) {\n        const errorText = await response.text();\n        throw new Error(errorText || 'Failed to delete event');\n      }\n\n      console.log('Event deleted:', eventId);\n      await fetchEvents();\n    } catch (error) {\n      console.error('Error deleting event:', error);\n    }\n  };\n\n  const EventForm = ({ isEditing = false, onCancel, initialEvent = null }) => {\n    const [formData, setFormData] = useState({\n      event: initialEvent?.event || '',\n      details: initialEvent?.details || '',\n      date: initialEvent ? new Date(initialEvent.timestamp).toISOString().split('T')[0] \n                       : new Date().toISOString().split('T')[0]\n    });\n\n    const handleInputChange = (e) => {\n      const { name, value } = e.target;\n      setFormData(prev => ({\n        ...prev,\n        [name]: value\n      }));\n    };\n\n    const handleSubmit = async () => {\n      if (!selectedCampaign) {\n        console.error('No campaign selected');\n        return;\n      }\n\n      try {\n        const timestamp = new Date(formData.date).getTime();\n        const eventData = {\n          event: formData.event,\n          details: formData.details,\n          timestamp,\n          campaign_id: selectedCampaign.id\n        };\n        \n        const url = initialEvent \n          ? `http://localhost:3001/api/timeline/${initialEvent.id}`\n          : 'http://localhost:3001/api/timeline';\n        \n        const method = initialEvent ? 'PUT' : 'POST';\n        \n        console.log('Submitting event:', eventData);\n        \n        const response = await fetch(url, {\n          method,\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify(eventData)\n        });\n\n        if (!response.ok) {\n          const errorText = await response.text();\n          throw new Error(errorText || 'Failed to save event');\n        }\n\n        const data = await response.json();\n        console.log('Event saved:', data);\n        \n        await fetchEvents();\n        onCancel();\n      } catch (error) {\n        console.error('Error saving event:', error);\n      }\n    };\n\n    return (\n      <div \n        style={{ \n          background: 'white',\n          borderRadius: '8px',\n          padding: '16px',\n          boxShadow: '0 1px 3px rgba(0, 0, 0, 0.1)',\n          marginBottom: isEditing ? '16px' : '20px'\n        }}\n      >\n        <div style={{ position: 'relative' }}>\n          <input\n            type=\"text\"\n            name=\"event\"\n            placeholder=\"Event\"\n            value={formData.event}\n            onChange={handleInputChange}\n            className=\"event-input\"\n            style={{ \n              width: '100%',\n              padding: '8px',\n              marginBottom: '8px',\n              background: 'transparent',\n              border: 'none',\n              borderBottom: '1px solid #E5E7EB',\n              color: formData.event ? '#111827' : '#6B7280',\n              fontSize: '16px',\n              fontWeight: '600',\n              outline: 'none'\n            }}\n          />\n          <textarea\n            name=\"details\"\n            placeholder=\"Details\"\n            value={formData.details}\n            onChange={handleInputChange}\n            className=\"details-input\"\n            style={{ \n              width: '100%',\n              padding: '8px',\n              marginBottom: '16px',\n              background: 'transparent',\n              border: 'none',\n              borderBottom: '1px solid #E5E7EB',\n              color: formData.details ? '#111827' : '#6B7280',\n              fontSize: '14px',\n              resize: 'vertical',\n              minHeight: '80px',\n              outline: 'none',\n              whiteSpace: 'pre-wrap'\n            }}\n          />\n          <div style={{ \n            display: 'flex', \n            alignItems: 'center',\n            justifyContent: 'space-between'\n          }}>\n            <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n              <label style={{ color: '#6B7280', fontSize: '14px' }}>\n                Game session date:\n              </label>\n              <input\n                type=\"date\"\n                name=\"date\"\n                value={formData.date}\n                onChange={handleInputChange}\n                style={{ \n                  background: 'white',\n                  border: '1px solid #E5E7EB',\n                  borderRadius: '4px',\n                  padding: '4px 8px',\n                  color: '#111827'\n                }}\n              />\n            </div>\n            <div style={{ display: 'flex', gap: '8px' }}>\n              <button \n                onClick={onCancel}\n                style={{\n                  background: 'white',\n                  color: '#6B7280',\n                  border: '1px solid #E5E7EB',\n                  borderRadius: '4px',\n                  padding: '8px 16px',\n                  cursor: 'pointer',\n                  fontWeight: '500'\n                }}\n              >\n                Cancel\n              </button>\n              <button \n                onClick={handleSubmit}\n                className=\"dnd-button-secondary\"\n              >\n                {isEditing ? 'Update event' : 'Save event'}\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  const handleTimelineClick = (event) => {\n    // Scroll to the event in the main timeline\n    const element = document.getElementById(`event-${event.id}`);\n    if (element) {\n      element.scrollIntoView({ behavior: 'smooth', block: 'center' });\n    }\n  };\n\n  return (\n    <>\n      <style>\n        {`\n          .event-input::placeholder {\n            color: #6B7280 !important;\n            font-weight: 600 !important;\n          }\n          .details-input::placeholder {\n            color: #6B7280 !important;\n          }\n          .timeline-nav-button:hover {\n            background: #F3F4F6;\n          }\n          .dnd-button {\n            background: linear-gradient(135deg, #8B4513 0%, #654321 100%);\n            color: #F5E6D3;\n            border: 1px solid #A0522D;\n            border-radius: 6px;\n            padding: 8px 20px;\n            cursor: pointer;\n            font-weight: 600;\n            font-size: 14px;\n            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.1);\n            text-transform: capitalize;\n            letter-spacing: 0.02em;\n            transition: all 0.2s ease;\n          }\n          .dnd-button:hover {\n            background: linear-gradient(135deg, #9B5523 0%, #755331 100%);\n            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.1);\n          }\n          .dnd-button-secondary {\n            background: #F5E6D3;\n            color: #8B4513;\n            border: 1px solid #A0522D;\n            border-radius: 6px;\n            padding: 8px 20px;\n            cursor: pointer;\n            font-weight: 600;\n            font-size: 14px;\n            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.5);\n            text-transform: capitalize;\n            letter-spacing: 0.02em;\n            transition: all 0.2s ease;\n          }\n          .dnd-button-secondary:hover {\n            background: #F8EFE3;\n            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.5);\n          }\n        `}\n      </style>\n      <div style={{ \n        padding: '32px 32px 0 32px',\n        height: '100%',\n        display: 'flex',\n        flexDirection: 'column'\n      }}>\n        <div style={{\n          display: 'flex',\n          gap: '48px',\n          alignItems: 'flex-start',\n          height: '100%'\n        }}>\n          <div style={{\n            flex: '1 1 auto',\n            minWidth: '400px',\n            maxWidth: '800px',\n            display: 'flex',\n            flexDirection: 'column',\n            gap: '24px',\n            height: '100%'\n          }}>\n            <div style={{\n              display: 'flex',\n              justifyContent: 'space-between',\n              alignItems: 'center'\n            }}>\n              <h2 style={{ margin: 0, fontSize: '24px', color: '#111827' }}>Timeline</h2>\n              <button \n                onClick={() => {\n                  setIsAddingEvent(true);\n                  setEditingEvent(null);\n                }}\n                className=\"dnd-button\"\n              >\n                Add new event\n              </button>\n            </div>\n\n            {isAddingEvent && !editingEvent && (\n              <EventForm onCancel={() => setIsAddingEvent(false)} />\n            )}\n\n            <div style={{\n              display: 'flex',\n              flexDirection: 'column',\n              gap: '16px',\n              flex: 1,\n              overflowY: 'auto'\n            }}>\n              <div style={{ paddingTop: '8px', paddingBottom: '8px' }}>\n                {Object.entries(\n                  events.reduce((acc, event) => {\n                    const date = new Date(parseInt(event.timestamp));\n                    const month = date.toLocaleString('default', { month: 'long', year: 'numeric' });\n                    if (!acc[month]) {\n                      acc[month] = [];\n                    }\n                    acc[month].push(event);\n                    return acc;\n                  }, {})\n                )\n                .sort(([monthA], [monthB]) => {\n                  const dateA = new Date(monthA);\n                  const dateB = new Date(monthB);\n                  return dateB - dateA;\n                })\n                .map(([month, monthEvents]) => (\n                  <div key={month}>\n                    <h4 style={{ \n                      fontSize: '13px', \n                      color: 'rgb(107, 95, 95)',\n                      margin: '24px 0 16px 0',\n                      fontWeight: '500',\n                      letterSpacing: '0.025em'\n                    }}>\n                      {month}\n                    </h4>\n                    {monthEvents\n                      .sort((a, b) => b.timestamp - a.timestamp)\n                      .map(event => {\n                        if (editingEvent && editingEvent.id === event.id) {\n                          return <EventForm \n                            key={event.id} \n                            isEditing \n                            initialEvent={event}\n                            onCancel={() => {\n                              setEditingEvent(null);\n                              setIsAddingEvent(false);\n                            }} \n                          />;\n                        }\n                        \n                        return (\n                          <div \n                            id={`event-${event.id}`}\n                            key={event.id} \n                            style={{\n                              background: 'white',\n                              padding: '16px',\n                              marginBottom: '16px',\n                              borderRadius: '8px',\n                              boxShadow: '0 1px 3px rgba(0, 0, 0, 0.1)'\n                            }}\n                          >\n                            <div style={{ \n                              display: 'flex', \n                              justifyContent: 'space-between', \n                              alignItems: 'flex-start',\n                              marginBottom: '8px'\n                            }}>\n                              <h3 style={{ margin: '0 0 16px 0', color: '#111827', fontWeight: '500' }}>{event.event}</h3>\n                              <EventMenu event={event} onEdit={handleEdit} onDelete={handleDelete} />\n                            </div>\n                            <p style={{ \n                              margin: '0 0 16px 0', \n                              color: '#6B7280',\n                              whiteSpace: 'pre-wrap'\n                            }}>{event.details}</p>\n                            <small style={{ color: '#6B7280', display: 'block', margin: 0 }}>{formatDate(event.timestamp)}</small>\n                          </div>\n                        );\n                      })}\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n          \n          <TimelineNavigation events={events} onTimelineClick={handleTimelineClick} />\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default Timeline;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}