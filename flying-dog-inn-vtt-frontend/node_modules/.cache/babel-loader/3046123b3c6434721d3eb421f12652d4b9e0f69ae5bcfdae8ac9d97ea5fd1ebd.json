{"ast":null,"code":"var _jsxFileName = \"/Users/josh.thorn/AutoML Co-Pilot/flying-dog-inn-vtt-frontend/src/components/Maps.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { createRoot } from 'react-dom/client';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { MapContainer, ImageOverlay, Marker, Popup, useMap, useMapEvents } from 'react-leaflet';\nimport L from 'leaflet';\nimport IconButton from '@mui/material/IconButton';\nimport Menu from '@mui/material/Menu';\nimport MenuItem from '@mui/material/MenuItem';\nimport Dialog from '@mui/material/Dialog';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogActions from '@mui/material/DialogActions';\nimport Button from '@mui/material/Button';\nimport TextField from '@mui/material/TextField';\nimport Select from '@mui/material/Select';\nimport FormControl from '@mui/material/FormControl';\nimport InputLabel from '@mui/material/InputLabel';\nimport { DotsThreeVertical, MapPin, Circle, Square, Triangle } from \"@phosphor-icons/react\";\nimport 'leaflet/dist/leaflet.css';\nimport './Maps.css';\nimport { useCampaign } from '../contexts/CampaignContext';\n\n// Available marker shapes and colors\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MARKER_SHAPES = {\n  default: {\n    label: 'Default Pin',\n    icon: /*#__PURE__*/_jsxDEV(MapPin, {\n      size: 24,\n      weight: \"fill\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 42\n    }, this)\n  },\n  circle: {\n    label: 'Circle',\n    icon: /*#__PURE__*/_jsxDEV(Circle, {\n      size: 24,\n      weight: \"fill\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 36\n    }, this)\n  },\n  square: {\n    label: 'Square',\n    icon: /*#__PURE__*/_jsxDEV(Square, {\n      size: 24,\n      weight: \"fill\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 36\n    }, this)\n  },\n  triangle: {\n    label: 'Triangle',\n    icon: /*#__PURE__*/_jsxDEV(Triangle, {\n      size: 24,\n      weight: \"fill\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 40\n    }, this)\n  }\n};\nconst MARKER_COLORS = {\n  '#FF0000': 'Red',\n  '#00FF00': 'Green',\n  '#0000FF': 'Blue',\n  '#FFFF00': 'Yellow',\n  '#FF00FF': 'Magenta',\n  '#00FFFF': 'Cyan',\n  '#000000': 'Black'\n};\nconst MARKER_COLOR_VALUES = Object.keys(MARKER_COLORS);\n\n// Create custom marker icons\n_c = MARKER_COLOR_VALUES;\nfunction createCustomIcon(color, shape) {\n  if (shape === 'circle') {\n    const svgTemplate = `\n      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" fill=\"${color}\" viewBox=\"0 0 256 256\">\n        <path d=\"M232,128A104,104,0,1,1,128,24,104.13,104.13,0,0,1,232,128Z\" stroke=\"rgba(0, 0, 0, 0.25)\" stroke-width=\"16\"/>\n      </svg>\n    `;\n    const svg = `data:image/svg+xml;base64,${btoa(svgTemplate)}`;\n    return L.icon({\n      iconUrl: svg,\n      iconSize: [32, 32],\n      iconAnchor: [16, 16],\n      popupAnchor: [0, -20]\n    });\n  } else if (shape === 'square') {\n    const svgTemplate = `\n      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" fill=\"${color}\" viewBox=\"0 0 256 256\">\n        <rect x=\"32\" y=\"32\" width=\"192\" height=\"192\" stroke=\"rgba(0, 0, 0, 0.25)\" stroke-width=\"16\"/>\n      </svg>\n    `;\n    const svg = `data:image/svg+xml;base64,${btoa(svgTemplate)}`;\n    return L.icon({\n      iconUrl: svg,\n      iconSize: [32, 32],\n      iconAnchor: [16, 16],\n      popupAnchor: [0, -20]\n    });\n  } else if (shape === 'triangle') {\n    const svgTemplate = `\n      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" fill=\"${color}\" viewBox=\"0 0 256 256\">\n        <path d=\"M236.77,188.64,149.1,33.13a14.41,14.41,0,0,0-25.47,0L36,188.64a13.79,13.79,0,0,0,12.16,20.35H224.61A13.79,13.79,0,0,0,236.77,188.64Z\" stroke=\"rgba(0, 0, 0, 0.25)\" stroke-width=\"16\"/>\n      </svg>\n    `;\n    const svg = `data:image/svg+xml;base64,${btoa(svgTemplate)}`;\n    return L.icon({\n      iconUrl: svg,\n      iconSize: [32, 32],\n      iconAnchor: [16, 16],\n      popupAnchor: [0, -20]\n    });\n  } else {\n    // Default pin with custom color\n    const svgTemplate = `\n      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" fill=\"${color}\" viewBox=\"0 0 256 256\">\n        <path d=\"M128,16a88.1,88.1,0,0,0-88,88c0,75.3,80,132.17,83.41,134.55a8,8,0,0,0,9.18,0C136,236.17,216,179.3,216,104A88.1,88.1,0,0,0,128,16Z\" stroke=\"rgba(0, 0, 0, 0.25)\" stroke-width=\"16\"/>\n      </svg>\n    `;\n    const svg = `data:image/svg+xml;base64,${btoa(svgTemplate)}`;\n    return L.icon({\n      iconUrl: svg,\n      iconSize: [32, 48],\n      iconAnchor: [16, 48],\n      popupAnchor: [0, -20]\n    });\n  }\n}\n\n// Component to handle map events and marker placement\nconst MapEventHandler = ({\n  onMarkerAdd,\n  isEditing\n}) => {\n  _s();\n  const map = useMapEvents({\n    click: e => {\n      if (!isEditing) {\n        onMarkerAdd(e);\n      }\n    }\n  });\n\n  // Update cursor based on editing state\n  useEffect(() => {\n    const container = map.getContainer();\n    container.style.cursor = isEditing ? 'default' : 'crosshair';\n    return () => {\n      container.style.cursor = '';\n    };\n  }, [isEditing, map]);\n  return null;\n};\n\n// Component for editable marker popup content\n_s(MapEventHandler, \"gWh149/DLPuF22WgXAndVVlzhL4=\", false, function () {\n  return [useMapEvents];\n});\n_c2 = MapEventHandler;\nfunction MarkerPopupContent({\n  marker,\n  onUpdate,\n  onDelete,\n  onEditStart,\n  onEditEnd,\n  isNewMarker = false\n}) {\n  _s2();\n  const [isEditing, setIsEditing] = useState(isNewMarker);\n  const [editedLabel, setEditedLabel] = useState(marker.label || '');\n  const [editedDescription, setEditedDescription] = useState(marker.description || '');\n  const [editedColor, setEditedColor] = useState(marker.color || '#FF0000');\n  const [editedShape, setEditedShape] = useState(marker.shape || 'default');\n  const [isSaving, setSaving] = useState(false);\n\n  // Start in edit mode for new markers\n  useEffect(() => {\n    if (isNewMarker) {\n      setIsEditing(true);\n      onEditStart();\n    }\n  }, [isNewMarker, onEditStart]);\n\n  // Update local state when marker prop changes\n  useEffect(() => {\n    setEditedLabel(marker.label || '');\n    setEditedDescription(marker.description || '');\n    setEditedColor(marker.color || '#FF0000');\n    setEditedShape(marker.shape || 'default');\n  }, [marker]);\n  const handleStartEditing = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    setIsEditing(true);\n    onEditStart();\n  };\n  const handleStopEditing = e => {\n    if (e) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n    setIsEditing(false);\n    onEditEnd();\n  };\n  const handleSave = async e => {\n    e.preventDefault();\n    e.stopPropagation();\n    setSaving(true);\n    try {\n      await onUpdate({\n        ...marker,\n        label: editedLabel,\n        description: editedDescription,\n        color: editedColor,\n        shape: editedShape\n      });\n      handleStopEditing();\n    } catch (error) {\n      console.error('Failed to update marker:', error);\n    } finally {\n      setSaving(false);\n    }\n  };\n  const handleDelete = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    onDelete(marker.id);\n  };\n\n  // For new markers or existing markers in edit mode, show the edit interface\n  if (isEditing || isNewMarker) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"marker-content\",\n      onClick: e => e.stopPropagation(),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"marker-header\",\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          size: \"small\",\n          fullWidth: true,\n          label: \"Label\",\n          value: editedLabel,\n          onChange: e => setEditedLabel(e.target.value),\n          margin: \"dense\",\n          onClick: e => e.stopPropagation(),\n          autoFocus: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          size: \"small\",\n          fullWidth: true,\n          multiline: true,\n          rows: 2,\n          label: \"Description\",\n          value: editedDescription,\n          onChange: e => setEditedDescription(e.target.value),\n          margin: \"dense\",\n          onClick: e => e.stopPropagation()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: '12px',\n            marginTop: '8px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(FormControl, {\n            size: \"small\",\n            margin: \"dense\",\n            onClick: e => e.stopPropagation(),\n            style: {\n              minWidth: '120px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n              children: \"Shape\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Select, {\n              value: editedShape,\n              onChange: e => setEditedShape(e.target.value),\n              MenuProps: {\n                anchorOrigin: {\n                  vertical: 'bottom',\n                  horizontal: 'left'\n                },\n                transformOrigin: {\n                  vertical: 'top',\n                  horizontal: 'left'\n                },\n                getContentAnchorEl: null\n              },\n              children: Object.entries(MARKER_SHAPES).map(([value, {\n                label,\n                icon\n              }]) => /*#__PURE__*/_jsxDEV(MenuItem, {\n                value: value,\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: '8px'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      color: editedColor\n                    },\n                    children: /*#__PURE__*/React.cloneElement(icon, {\n                      color: editedColor\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 242,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: label\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 245,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 241,\n                  columnNumber: 21\n                }, this)\n              }, value, false, {\n                fileName: _jsxFileName,\n                lineNumber: 240,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n            size: \"small\",\n            margin: \"dense\",\n            onClick: e => e.stopPropagation(),\n            style: {\n              flex: 1\n            },\n            children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n              children: \"Color\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 252,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Select, {\n              value: editedColor,\n              onChange: e => setEditedColor(e.target.value),\n              MenuProps: {\n                anchorOrigin: {\n                  vertical: 'bottom',\n                  horizontal: 'left'\n                },\n                transformOrigin: {\n                  vertical: 'top',\n                  horizontal: 'left'\n                },\n                getContentAnchorEl: null\n              },\n              children: Object.entries(MARKER_COLORS).map(([color, name]) => /*#__PURE__*/_jsxDEV(MenuItem, {\n                value: color,\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: '8px'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      width: 16,\n                      height: 16,\n                      backgroundColor: color,\n                      border: '1px solid #ccc',\n                      borderRadius: '4px'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 271,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 278,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 270,\n                  columnNumber: 21\n                }, this)\n              }, color, false, {\n                fileName: _jsxFileName,\n                lineNumber: 269,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"marker-actions\",\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          className: isNewMarker ? \"delete-button\" : \"cancel-button\",\n          onClick: isNewMarker ? handleDelete : handleStopEditing,\n          disabled: isSaving,\n          children: isNewMarker ? 'Cancel' : 'Cancel Edit'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          className: \"dnd-button\",\n          onClick: handleSave,\n          disabled: isSaving || !editedLabel.trim(),\n          children: isSaving ? 'Saving...' : isNewMarker ? 'Add Marker' : 'Save Changes'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 7\n    }, this);\n  }\n\n  // For existing markers, show the view interface\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"marker-content\",\n    onClick: e => e.stopPropagation(),\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"marker-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"marker-title\",\n        children: marker.label\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 9\n      }, this), marker.description && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"marker-description\",\n        children: marker.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"marker-actions\",\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        className: \"delete-button\",\n        onClick: handleDelete,\n        children: \"Delete\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        className: \"dnd-button\",\n        onClick: handleStartEditing,\n        children: \"Edit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 308,\n    columnNumber: 5\n  }, this);\n}\n\n// Add this new component after the MapEventHandler component\n_s2(MarkerPopupContent, \"V4ZuT6OAUmI6MC2TCVw29y/Err4=\");\n_c3 = MarkerPopupContent;\nfunction MapResetter({\n  bounds\n}) {\n  _s3();\n  const map = useMap();\n  useEffect(() => {\n    if (bounds) {\n      map.fitBounds(bounds);\n    }\n  }, [bounds, map]);\n  return null;\n}\n_s3(MapResetter, \"IoceErwr5KVGS9kN4RQ1bOkYMAg=\", false, function () {\n  return [useMap];\n});\n_c4 = MapResetter;\nconst Maps = ({\n  onMapChange\n}) => {\n  _s4();\n  const {\n    id: mapId\n  } = useParams();\n  const navigate = useNavigate();\n  const [map, setMap] = useState(null);\n  const [markers, setMarkers] = useState([]);\n  const [menuAnchorEl, setMenuAnchorEl] = useState(null);\n  const [isRenameDialogOpen, setRenameDialogOpen] = useState(false);\n  const [isDeleteDialogOpen, setDeleteDialogOpen] = useState(false);\n  const [newMapName, setNewMapName] = useState('');\n  const [isEditing, setIsEditing] = useState(false);\n  const [imageDimensions, setImageDimensions] = useState(null);\n  const {\n    selectedCampaign\n  } = useCampaign();\n  const [activePopup, setActivePopup] = useState(null);\n  useEffect(() => {\n    if (selectedCampaign && mapId) {\n      fetchMap();\n      fetchMarkers();\n    }\n  }, [mapId, selectedCampaign]);\n  const fetchMap = async () => {\n    if (!selectedCampaign) return;\n    try {\n      const response = await fetch(`http://localhost:3001/api/maps/${mapId}?campaign_id=${selectedCampaign.id}`);\n      if (!response.ok) throw new Error('Failed to fetch map');\n      const data = await response.json();\n      setMap(data);\n      setNewMapName(data.name);\n      const img = new Image();\n      img.onload = () => {\n        setImageDimensions({\n          width: img.width,\n          height: img.height\n        });\n      };\n      img.src = `http://localhost:3001/maps/${data.path}`;\n      if (onMapChange) onMapChange(data);\n    } catch (error) {\n      console.error('Error fetching map:', error);\n      navigate('/maps');\n    }\n  };\n  const fetchMarkers = async () => {\n    if (!selectedCampaign || !mapId) return;\n    try {\n      const response = await fetch(`http://localhost:3001/api/maps/${mapId}/markers?campaign_id=${selectedCampaign.id}`);\n      if (!response.ok) throw new Error('Failed to fetch markers');\n      const data = await response.json();\n      setMarkers(data);\n    } catch (error) {\n      console.error('Error fetching markers:', error);\n    }\n  };\n  const handleMarkerAdd = async e => {\n    if (!selectedCampaign || !mapId || !(e !== null && e !== void 0 && e.latlng)) return;\n    if (isEditing || activePopup) return;\n    const {\n      lat,\n      lng\n    } = e.latlng;\n    try {\n      const response = await fetch(`http://localhost:3001/api/maps/${mapId}/markers`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          lat,\n          lng,\n          label: '',\n          description: '',\n          color: '#FF0000',\n          shape: 'default',\n          campaign_id: selectedCampaign.id\n        })\n      });\n      if (!response.ok) throw new Error('Failed to create marker');\n      const newMarker = await response.json();\n      setMarkers(prev => [...prev, newMarker]);\n      setActivePopup(newMarker.id);\n      setIsEditing(true);\n    } catch (error) {\n      console.error('Error creating marker:', error);\n    }\n  };\n  const handleMarkerDelete = async markerId => {\n    if (!selectedCampaign || !mapId) return;\n    try {\n      const response = await fetch(`http://localhost:3001/api/maps/${mapId}/markers/${markerId}?campaign_id=${selectedCampaign.id}`, {\n        method: 'DELETE'\n      });\n      if (!response.ok) throw new Error('Failed to delete marker');\n      setMarkers(prev => prev.filter(marker => marker.id !== markerId));\n      setActivePopup(null);\n      setIsEditing(false);\n    } catch (error) {\n      console.error('Error deleting marker:', error);\n    }\n  };\n  const handleMarkerUpdate = async updatedMarker => {\n    if (!selectedCampaign || !mapId) return;\n    try {\n      const response = await fetch(`http://localhost:3001/api/maps/${mapId}/markers/${updatedMarker.id}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          ...updatedMarker,\n          campaign_id: selectedCampaign.id\n        })\n      });\n      if (!response.ok) throw new Error('Failed to update marker');\n      const savedMarker = await response.json();\n      setMarkers(prev => prev.map(marker => marker.id === savedMarker.id ? savedMarker : marker));\n      return savedMarker;\n    } catch (error) {\n      console.error('Error updating marker:', error);\n      throw error;\n    }\n  };\n  if (!map || !markers || !imageDimensions) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading map...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 481,\n      columnNumber: 12\n    }, this);\n  }\n  const bounds = [[0, 0], [imageDimensions.height, imageDimensions.width]];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"map-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        alignItems: 'center',\n        padding: '0 16px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          margin: 0,\n          display: 'flex',\n          alignItems: 'center'\n        },\n        children: map.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 489,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n        \"aria-label\": \"more\",\n        \"aria-controls\": \"map-menu\",\n        \"aria-haspopup\": \"true\",\n        onClick: e => setMenuAnchorEl(e.currentTarget),\n        style: {\n          marginLeft: '8px',\n          color: '#111827'\n        },\n        children: /*#__PURE__*/_jsxDEV(DotsThreeVertical, {\n          size: 24\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 497,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 490,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 488,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Menu, {\n      id: \"map-menu\",\n      anchorEl: menuAnchorEl,\n      keepMounted: true,\n      open: Boolean(menuAnchorEl),\n      onClose: () => setMenuAnchorEl(null),\n      children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n        onClick: () => {\n          setRenameDialogOpen(true);\n          setMenuAnchorEl(null);\n        },\n        children: \"Rename\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 508,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n        onClick: () => {\n          setDeleteDialogOpen(true);\n          setMenuAnchorEl(null);\n        },\n        children: \"Delete\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 512,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 501,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        height: 'calc(100vh - 80px)',\n        width: '100%'\n      },\n      children: /*#__PURE__*/_jsxDEV(MapContainer, {\n        bounds: bounds,\n        maxBounds: bounds,\n        style: {\n          height: '100%',\n          width: '100%'\n        },\n        crs: L.CRS.Simple,\n        maxZoom: 2,\n        minZoom: -2,\n        children: [/*#__PURE__*/_jsxDEV(ImageOverlay, {\n          url: `http://localhost:3001/maps/${map.path}`,\n          bounds: bounds\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 527,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(MapEventHandler, {\n          onMarkerAdd: handleMarkerAdd,\n          isEditing: isEditing\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 531,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(MapResetter, {\n          bounds: bounds\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 532,\n          columnNumber: 11\n        }, this), markers.map(marker => /*#__PURE__*/_jsxDEV(Marker, {\n          position: [Number(marker.lat), Number(marker.lng)],\n          icon: createCustomIcon(marker.color || '#FF0000', marker.shape || 'default'),\n          eventHandlers: {\n            click: e => {\n              L.DomEvent.stopPropagation(e);\n              setActivePopup(marker.id);\n            }\n          },\n          children: /*#__PURE__*/_jsxDEV(Popup, {\n            offset: [0, -20],\n            className: \"custom-popup\",\n            closeButton: true,\n            closeOnClick: false,\n            onClose: () => {\n              setIsEditing(false);\n              setActivePopup(null);\n            },\n            autoPan: false,\n            ...(activePopup === marker.id ? {\n              autoOpen: true\n            } : {}),\n            children: /*#__PURE__*/_jsxDEV(MarkerPopupContent, {\n              marker: marker,\n              onUpdate: handleMarkerUpdate,\n              onDelete: () => handleMarkerDelete(marker.id),\n              onEditStart: () => setIsEditing(true),\n              onEditEnd: () => {\n                setIsEditing(false);\n                setActivePopup(null);\n              },\n              isNewMarker: false\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 557,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 545,\n            columnNumber: 15\n          }, this)\n        }, marker.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 534,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 519,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 518,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 487,\n    columnNumber: 5\n  }, this);\n};\n_s4(Maps, \"CyRnQQOdQc/B0zjD8/hTP++mH8o=\", false, function () {\n  return [useParams, useNavigate, useCampaign];\n});\n_c5 = Maps;\nexport default Maps;\nvar _c, _c2, _c3, _c4, _c5;\n$RefreshReg$(_c, \"MARKER_COLOR_VALUES\");\n$RefreshReg$(_c2, \"MapEventHandler\");\n$RefreshReg$(_c3, \"MarkerPopupContent\");\n$RefreshReg$(_c4, \"MapResetter\");\n$RefreshReg$(_c5, \"Maps\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","createRoot","useParams","useNavigate","MapContainer","ImageOverlay","Marker","Popup","useMap","useMapEvents","L","IconButton","Menu","MenuItem","Dialog","DialogTitle","DialogContent","DialogActions","Button","TextField","Select","FormControl","InputLabel","DotsThreeVertical","MapPin","Circle","Square","Triangle","useCampaign","jsxDEV","_jsxDEV","MARKER_SHAPES","default","label","icon","size","weight","fileName","_jsxFileName","lineNumber","columnNumber","circle","square","triangle","MARKER_COLORS","MARKER_COLOR_VALUES","Object","keys","_c","createCustomIcon","color","shape","svgTemplate","svg","btoa","iconUrl","iconSize","iconAnchor","popupAnchor","MapEventHandler","onMarkerAdd","isEditing","_s","map","click","e","container","getContainer","style","cursor","_c2","MarkerPopupContent","marker","onUpdate","onDelete","onEditStart","onEditEnd","isNewMarker","_s2","setIsEditing","editedLabel","setEditedLabel","editedDescription","setEditedDescription","description","editedColor","setEditedColor","editedShape","setEditedShape","isSaving","setSaving","handleStartEditing","preventDefault","stopPropagation","handleStopEditing","handleSave","error","console","handleDelete","id","className","onClick","children","fullWidth","value","onChange","target","margin","autoFocus","multiline","rows","display","gap","marginTop","minWidth","MenuProps","anchorOrigin","vertical","horizontal","transformOrigin","getContentAnchorEl","entries","alignItems","cloneElement","flex","name","width","height","backgroundColor","border","borderRadius","disabled","trim","_c3","MapResetter","bounds","_s3","fitBounds","_c4","Maps","onMapChange","_s4","mapId","navigate","setMap","markers","setMarkers","menuAnchorEl","setMenuAnchorEl","isRenameDialogOpen","setRenameDialogOpen","isDeleteDialogOpen","setDeleteDialogOpen","newMapName","setNewMapName","imageDimensions","setImageDimensions","selectedCampaign","activePopup","setActivePopup","fetchMap","fetchMarkers","response","fetch","ok","Error","data","json","img","Image","onload","src","path","handleMarkerAdd","latlng","lat","lng","method","headers","body","JSON","stringify","campaign_id","newMarker","prev","handleMarkerDelete","markerId","filter","handleMarkerUpdate","updatedMarker","savedMarker","padding","currentTarget","marginLeft","anchorEl","keepMounted","open","Boolean","onClose","maxBounds","crs","CRS","Simple","maxZoom","minZoom","url","position","Number","eventHandlers","DomEvent","offset","closeButton","closeOnClick","autoPan","autoOpen","_c5","$RefreshReg$"],"sources":["/Users/josh.thorn/AutoML Co-Pilot/flying-dog-inn-vtt-frontend/src/components/Maps.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { createRoot } from 'react-dom/client';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { MapContainer, ImageOverlay, Marker, Popup, useMap, useMapEvents } from 'react-leaflet';\nimport L from 'leaflet';\nimport IconButton from '@mui/material/IconButton';\nimport Menu from '@mui/material/Menu';\nimport MenuItem from '@mui/material/MenuItem';\nimport Dialog from '@mui/material/Dialog';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogActions from '@mui/material/DialogActions';\nimport Button from '@mui/material/Button';\nimport TextField from '@mui/material/TextField';\nimport Select from '@mui/material/Select';\nimport FormControl from '@mui/material/FormControl';\nimport InputLabel from '@mui/material/InputLabel';\nimport { DotsThreeVertical, MapPin, Circle, Square, Triangle } from \"@phosphor-icons/react\";\nimport 'leaflet/dist/leaflet.css';\nimport './Maps.css';\nimport { useCampaign } from '../contexts/CampaignContext';\n\n// Available marker shapes and colors\nconst MARKER_SHAPES = {\n  default: { label: 'Default Pin', icon: <MapPin size={24} weight=\"fill\" /> },\n  circle: { label: 'Circle', icon: <Circle size={24} weight=\"fill\" /> },\n  square: { label: 'Square', icon: <Square size={24} weight=\"fill\" /> },\n  triangle: { label: 'Triangle', icon: <Triangle size={24} weight=\"fill\" /> }\n};\n\nconst MARKER_COLORS = {\n  '#FF0000': 'Red',\n  '#00FF00': 'Green',\n  '#0000FF': 'Blue',\n  '#FFFF00': 'Yellow',\n  '#FF00FF': 'Magenta',\n  '#00FFFF': 'Cyan',\n  '#000000': 'Black'\n};\n\nconst MARKER_COLOR_VALUES = Object.keys(MARKER_COLORS);\n\n// Create custom marker icons\nfunction createCustomIcon(color, shape) {\n  if (shape === 'circle') {\n    const svgTemplate = `\n      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" fill=\"${color}\" viewBox=\"0 0 256 256\">\n        <path d=\"M232,128A104,104,0,1,1,128,24,104.13,104.13,0,0,1,232,128Z\" stroke=\"rgba(0, 0, 0, 0.25)\" stroke-width=\"16\"/>\n      </svg>\n    `;\n    const svg = `data:image/svg+xml;base64,${btoa(svgTemplate)}`;\n    \n    return L.icon({\n      iconUrl: svg,\n      iconSize: [32, 32],\n      iconAnchor: [16, 16],\n      popupAnchor: [0, -20]\n    });\n  } else if (shape === 'square') {\n    const svgTemplate = `\n      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" fill=\"${color}\" viewBox=\"0 0 256 256\">\n        <rect x=\"32\" y=\"32\" width=\"192\" height=\"192\" stroke=\"rgba(0, 0, 0, 0.25)\" stroke-width=\"16\"/>\n      </svg>\n    `;\n    const svg = `data:image/svg+xml;base64,${btoa(svgTemplate)}`;\n    \n    return L.icon({\n      iconUrl: svg,\n      iconSize: [32, 32],\n      iconAnchor: [16, 16],\n      popupAnchor: [0, -20]\n    });\n  } else if (shape === 'triangle') {\n    const svgTemplate = `\n      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" fill=\"${color}\" viewBox=\"0 0 256 256\">\n        <path d=\"M236.77,188.64,149.1,33.13a14.41,14.41,0,0,0-25.47,0L36,188.64a13.79,13.79,0,0,0,12.16,20.35H224.61A13.79,13.79,0,0,0,236.77,188.64Z\" stroke=\"rgba(0, 0, 0, 0.25)\" stroke-width=\"16\"/>\n      </svg>\n    `;\n    const svg = `data:image/svg+xml;base64,${btoa(svgTemplate)}`;\n    \n    return L.icon({\n      iconUrl: svg,\n      iconSize: [32, 32],\n      iconAnchor: [16, 16],\n      popupAnchor: [0, -20]\n    });\n  } else {\n    // Default pin with custom color\n    const svgTemplate = `\n      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" fill=\"${color}\" viewBox=\"0 0 256 256\">\n        <path d=\"M128,16a88.1,88.1,0,0,0-88,88c0,75.3,80,132.17,83.41,134.55a8,8,0,0,0,9.18,0C136,236.17,216,179.3,216,104A88.1,88.1,0,0,0,128,16Z\" stroke=\"rgba(0, 0, 0, 0.25)\" stroke-width=\"16\"/>\n      </svg>\n    `;\n    const svg = `data:image/svg+xml;base64,${btoa(svgTemplate)}`;\n    \n    return L.icon({\n      iconUrl: svg,\n      iconSize: [32, 48],\n      iconAnchor: [16, 48],\n      popupAnchor: [0, -20]\n    });\n  }\n}\n\n// Component to handle map events and marker placement\nconst MapEventHandler = ({ onMarkerAdd, isEditing }) => {\n  const map = useMapEvents({\n    click: (e) => {\n      if (!isEditing) {\n        onMarkerAdd(e);\n      }\n    }\n  });\n\n  // Update cursor based on editing state\n  useEffect(() => {\n    const container = map.getContainer();\n    container.style.cursor = isEditing ? 'default' : 'crosshair';\n    return () => {\n      container.style.cursor = '';\n    };\n  }, [isEditing, map]);\n\n  return null;\n};\n\n// Component for editable marker popup content\nfunction MarkerPopupContent({ marker, onUpdate, onDelete, onEditStart, onEditEnd, isNewMarker = false }) {\n  const [isEditing, setIsEditing] = useState(isNewMarker);\n  const [editedLabel, setEditedLabel] = useState(marker.label || '');\n  const [editedDescription, setEditedDescription] = useState(marker.description || '');\n  const [editedColor, setEditedColor] = useState(marker.color || '#FF0000');\n  const [editedShape, setEditedShape] = useState(marker.shape || 'default');\n  const [isSaving, setSaving] = useState(false);\n\n  // Start in edit mode for new markers\n  useEffect(() => {\n    if (isNewMarker) {\n      setIsEditing(true);\n      onEditStart();\n    }\n  }, [isNewMarker, onEditStart]);\n\n  // Update local state when marker prop changes\n  useEffect(() => {\n    setEditedLabel(marker.label || '');\n    setEditedDescription(marker.description || '');\n    setEditedColor(marker.color || '#FF0000');\n    setEditedShape(marker.shape || 'default');\n  }, [marker]);\n\n  const handleStartEditing = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setIsEditing(true);\n    onEditStart();\n  };\n\n  const handleStopEditing = (e) => {\n    if (e) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n    setIsEditing(false);\n    onEditEnd();\n  };\n\n  const handleSave = async (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    \n    setSaving(true);\n    try {\n      await onUpdate({\n        ...marker,\n        label: editedLabel,\n        description: editedDescription,\n        color: editedColor,\n        shape: editedShape\n      });\n      handleStopEditing();\n    } catch (error) {\n      console.error('Failed to update marker:', error);\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleDelete = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    onDelete(marker.id);\n  };\n\n  // For new markers or existing markers in edit mode, show the edit interface\n  if (isEditing || isNewMarker) {\n    return (\n      <div className=\"marker-content\" onClick={(e) => e.stopPropagation()}>\n        <div className=\"marker-header\">\n          <TextField\n            size=\"small\"\n            fullWidth\n            label=\"Label\"\n            value={editedLabel}\n            onChange={(e) => setEditedLabel(e.target.value)}\n            margin=\"dense\"\n            onClick={(e) => e.stopPropagation()}\n            autoFocus\n          />\n          <TextField\n            size=\"small\"\n            fullWidth\n            multiline\n            rows={2}\n            label=\"Description\"\n            value={editedDescription}\n            onChange={(e) => setEditedDescription(e.target.value)}\n            margin=\"dense\"\n            onClick={(e) => e.stopPropagation()}\n          />\n          <div style={{ display: 'flex', gap: '12px', marginTop: '8px' }}>\n            <FormControl size=\"small\" margin=\"dense\" onClick={(e) => e.stopPropagation()} style={{ minWidth: '120px' }}>\n              <InputLabel>Shape</InputLabel>\n              <Select\n                value={editedShape}\n                onChange={(e) => setEditedShape(e.target.value)}\n                MenuProps={{\n                  anchorOrigin: {\n                    vertical: 'bottom',\n                    horizontal: 'left',\n                  },\n                  transformOrigin: {\n                    vertical: 'top',\n                    horizontal: 'left',\n                  },\n                  getContentAnchorEl: null,\n                }}\n              >\n                {Object.entries(MARKER_SHAPES).map(([value, { label, icon }]) => (\n                  <MenuItem key={value} value={value}>\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n                      <div style={{ color: editedColor }}>\n                        {React.cloneElement(icon, { color: editedColor })}\n                      </div>\n                      <span>{label}</span>\n                    </div>\n                  </MenuItem>\n                ))}\n              </Select>\n            </FormControl>\n            <FormControl size=\"small\" margin=\"dense\" onClick={(e) => e.stopPropagation()} style={{ flex: 1 }}>\n              <InputLabel>Color</InputLabel>\n              <Select\n                value={editedColor}\n                onChange={(e) => setEditedColor(e.target.value)}\n                MenuProps={{\n                  anchorOrigin: {\n                    vertical: 'bottom',\n                    horizontal: 'left',\n                  },\n                  transformOrigin: {\n                    vertical: 'top',\n                    horizontal: 'left',\n                  },\n                  getContentAnchorEl: null,\n                }}\n              >\n                {Object.entries(MARKER_COLORS).map(([color, name]) => (\n                  <MenuItem key={color} value={color}>\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n                      <div style={{ \n                        width: 16, \n                        height: 16, \n                        backgroundColor: color,\n                        border: '1px solid #ccc',\n                        borderRadius: '4px'\n                      }} />\n                      <span>{name}</span>\n                    </div>\n                  </MenuItem>\n                ))}\n              </Select>\n            </FormControl>\n          </div>\n        </div>\n        <div className=\"marker-actions\">\n          <Button \n            className={isNewMarker ? \"delete-button\" : \"cancel-button\"}\n            onClick={isNewMarker ? handleDelete : handleStopEditing}\n            disabled={isSaving}\n          >\n            {isNewMarker ? 'Cancel' : 'Cancel Edit'}\n          </Button>\n          <Button \n            className=\"dnd-button\"\n            onClick={handleSave} \n            disabled={isSaving || !editedLabel.trim()}\n          >\n            {isSaving ? 'Saving...' : isNewMarker ? 'Add Marker' : 'Save Changes'}\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  // For existing markers, show the view interface\n  return (\n    <div className=\"marker-content\" onClick={(e) => e.stopPropagation()}>\n      <div className=\"marker-header\">\n        <div className=\"marker-title\">{marker.label}</div>\n        {marker.description && (\n          <div className=\"marker-description\">{marker.description}</div>\n        )}\n      </div>\n      <div className=\"marker-actions\">\n        <Button \n          className=\"delete-button\"\n          onClick={handleDelete}\n        >\n          Delete\n        </Button>\n        <Button \n          className=\"dnd-button\"\n          onClick={handleStartEditing}\n        >\n          Edit\n        </Button>\n      </div>\n    </div>\n  );\n}\n\n// Add this new component after the MapEventHandler component\nfunction MapResetter({ bounds }) {\n  const map = useMap();\n  \n  useEffect(() => {\n    if (bounds) {\n      map.fitBounds(bounds);\n    }\n  }, [bounds, map]);\n  \n  return null;\n}\n\nconst Maps = ({ onMapChange }) => {\n  const { id: mapId } = useParams();\n  const navigate = useNavigate();\n  const [map, setMap] = useState(null);\n  const [markers, setMarkers] = useState([]);\n  const [menuAnchorEl, setMenuAnchorEl] = useState(null);\n  const [isRenameDialogOpen, setRenameDialogOpen] = useState(false);\n  const [isDeleteDialogOpen, setDeleteDialogOpen] = useState(false);\n  const [newMapName, setNewMapName] = useState('');\n  const [isEditing, setIsEditing] = useState(false);\n  const [imageDimensions, setImageDimensions] = useState(null);\n  const { selectedCampaign } = useCampaign();\n  const [activePopup, setActivePopup] = useState(null);\n\n  useEffect(() => {\n    if (selectedCampaign && mapId) {\n      fetchMap();\n      fetchMarkers();\n    }\n  }, [mapId, selectedCampaign]);\n\n  const fetchMap = async () => {\n    if (!selectedCampaign) return;\n    \n    try {\n      const response = await fetch(`http://localhost:3001/api/maps/${mapId}?campaign_id=${selectedCampaign.id}`);\n      if (!response.ok) throw new Error('Failed to fetch map');\n      const data = await response.json();\n      setMap(data);\n      setNewMapName(data.name);\n      \n      const img = new Image();\n      img.onload = () => {\n        setImageDimensions({ width: img.width, height: img.height });\n      };\n      img.src = `http://localhost:3001/maps/${data.path}`;\n      \n      if (onMapChange) onMapChange(data);\n    } catch (error) {\n      console.error('Error fetching map:', error);\n      navigate('/maps');\n    }\n  };\n\n  const fetchMarkers = async () => {\n    if (!selectedCampaign || !mapId) return;\n    \n    try {\n      const response = await fetch(`http://localhost:3001/api/maps/${mapId}/markers?campaign_id=${selectedCampaign.id}`);\n      if (!response.ok) throw new Error('Failed to fetch markers');\n      const data = await response.json();\n      setMarkers(data);\n    } catch (error) {\n      console.error('Error fetching markers:', error);\n    }\n  };\n\n  const handleMarkerAdd = async (e) => {\n    if (!selectedCampaign || !mapId || !e?.latlng) return;\n    if (isEditing || activePopup) return;\n\n    const { lat, lng } = e.latlng;\n    \n    try {\n      const response = await fetch(`http://localhost:3001/api/maps/${mapId}/markers`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          lat,\n          lng,\n          label: '',\n          description: '',\n          color: '#FF0000',\n          shape: 'default',\n          campaign_id: selectedCampaign.id\n        }),\n      });\n\n      if (!response.ok) throw new Error('Failed to create marker');\n      \n      const newMarker = await response.json();\n      setMarkers(prev => [...prev, newMarker]);\n      setActivePopup(newMarker.id);\n      setIsEditing(true);\n    } catch (error) {\n      console.error('Error creating marker:', error);\n    }\n  };\n\n  const handleMarkerDelete = async (markerId) => {\n    if (!selectedCampaign || !mapId) return;\n    \n    try {\n      const response = await fetch(`http://localhost:3001/api/maps/${mapId}/markers/${markerId}?campaign_id=${selectedCampaign.id}`, {\n        method: 'DELETE',\n      });\n      \n      if (!response.ok) throw new Error('Failed to delete marker');\n      \n      setMarkers(prev => prev.filter(marker => marker.id !== markerId));\n      setActivePopup(null);\n      setIsEditing(false);\n    } catch (error) {\n      console.error('Error deleting marker:', error);\n    }\n  };\n\n  const handleMarkerUpdate = async (updatedMarker) => {\n    if (!selectedCampaign || !mapId) return;\n\n    try {\n      const response = await fetch(`http://localhost:3001/api/maps/${mapId}/markers/${updatedMarker.id}`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          ...updatedMarker,\n          campaign_id: selectedCampaign.id\n        }),\n      });\n\n      if (!response.ok) throw new Error('Failed to update marker');\n      \n      const savedMarker = await response.json();\n      setMarkers(prev => prev.map(marker => \n        marker.id === savedMarker.id ? savedMarker : marker\n      ));\n      \n      return savedMarker;\n    } catch (error) {\n      console.error('Error updating marker:', error);\n      throw error;\n    }\n  };\n\n  if (!map || !markers || !imageDimensions) {\n    return <div>Loading map...</div>;\n  }\n\n  const bounds = [[0, 0], [imageDimensions.height, imageDimensions.width]];\n\n  return (\n    <div className=\"map-container\">\n      <div style={{ display: 'flex', alignItems: 'center', padding: '0 16px' }}>\n        <h2 style={{ margin: 0, display: 'flex', alignItems: 'center' }}>{map.name}</h2>\n        <IconButton\n          aria-label=\"more\"\n          aria-controls=\"map-menu\"\n          aria-haspopup=\"true\"\n          onClick={(e) => setMenuAnchorEl(e.currentTarget)}\n          style={{ marginLeft: '8px', color: '#111827' }}\n        >\n          <DotsThreeVertical size={24} />\n        </IconButton>\n      </div>\n\n      <Menu\n        id=\"map-menu\"\n        anchorEl={menuAnchorEl}\n        keepMounted\n        open={Boolean(menuAnchorEl)}\n        onClose={() => setMenuAnchorEl(null)}\n      >\n        <MenuItem onClick={() => {\n          setRenameDialogOpen(true);\n          setMenuAnchorEl(null);\n        }}>Rename</MenuItem>\n        <MenuItem onClick={() => {\n          setDeleteDialogOpen(true);\n          setMenuAnchorEl(null);\n        }}>Delete</MenuItem>\n      </Menu>\n\n      <div style={{ height: 'calc(100vh - 80px)', width: '100%' }}>\n        <MapContainer\n          bounds={bounds}\n          maxBounds={bounds}\n          style={{ height: '100%', width: '100%' }}\n          crs={L.CRS.Simple}\n          maxZoom={2}\n          minZoom={-2}\n        >\n          <ImageOverlay\n            url={`http://localhost:3001/maps/${map.path}`}\n            bounds={bounds}\n          />\n          <MapEventHandler onMarkerAdd={handleMarkerAdd} isEditing={isEditing} />\n          <MapResetter bounds={bounds} />\n          {markers.map((marker) => (\n            <Marker \n              key={marker.id} \n              position={[Number(marker.lat), Number(marker.lng)]}\n              icon={createCustomIcon(marker.color || '#FF0000', marker.shape || 'default')}\n              eventHandlers={{\n                click: (e) => {\n                  L.DomEvent.stopPropagation(e);\n                  setActivePopup(marker.id);\n                }\n              }}\n            >\n              <Popup\n                offset={[0, -20]}\n                className=\"custom-popup\"\n                closeButton={true}\n                closeOnClick={false}\n                onClose={() => {\n                  setIsEditing(false);\n                  setActivePopup(null);\n                }}\n                autoPan={false}\n                {...(activePopup === marker.id ? { autoOpen: true } : {})}\n              >\n                <MarkerPopupContent\n                  marker={marker}\n                  onUpdate={handleMarkerUpdate}\n                  onDelete={() => handleMarkerDelete(marker.id)}\n                  onEditStart={() => setIsEditing(true)}\n                  onEditEnd={() => {\n                    setIsEditing(false);\n                    setActivePopup(null);\n                  }}\n                  isNewMarker={false}\n                />\n              </Popup>\n            </Marker>\n          ))}\n        </MapContainer>\n      </div>\n    </div>\n  );\n};\n\nexport default Maps;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}